---
import MobileMenu from './MobileMenu.astro';
---

<header class="global-header">
  <div class="container">
    <div class="header-content">
      <a href="/" class="logo">
        <svg
          id="b"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 122.19 112.59"
          class="logo__image"
        >
          <g id="c" class="logo-vector">
            <g>
              <path
                d="m57.75,6.13c-9.72,0-18.87,2.41-26.9,6.65l9.49,9.49c.93.93.93,2.33,0,3.27-.93.93-2.33.93-3.27,0l-10.35-10.35C10.66,25.44,0,43.41,0,63.88c0,4.65.56,9.16,1.6,13.5L71.24,7.73c-4.33-1.04-8.85-1.6-13.5-1.6Z"
                class="logo-vector__left-path"></path>
              <path
                d="m117.89,32.97h-46.36c-1.13,0-1.88-.75-1.88-1.88,0-.98.75-1.88,1.88-1.88h44.65c-6.82-13.72-18.93-24.35-33.67-29.21.07.71-.17,1.43-.74,2L9.99,74.08c7.92,22.44,29.31,38.52,54.45,38.52,3.2,0,6.33-.27,9.38-.77-.17-.24-.28-.51-.28-.88,0-.32.19-.78.52-1.1,0,0,34.4-34.27,36.53-36.53l-13.9-13.9c-1.94,2.13-20.37,20.37-20.37,20.37-.65.65-1.62.65-2.26,0-.65-.65-.65-1.62,0-2.26l21.47-21.47c.32-.32.84-.52,1.16-.52.45,0,.97.19,1.29.52l15.97,16.16c.65.65.65,1.75,0,2.26l-36.66,36.66c25.7-5.85,44.89-28.82,44.89-56.29,0-7.74-1.53-15.13-4.3-21.87Zm-46.44,28.43h-8.56l-.11,29.04c0,.8-.32,1.56-.88,2.12-2.98,3-12.68,12.72-14.78,14.64-.3.27-.93.73-1.31.6-.75-.25-1.12-.91-1.28-1.43-.19-.61.21-.92.88-1.58.14-.14.35-.34.67-.67,0,0,13.75-12.99,13.75-13.48v-29.24h-17.42v29.03c0,.92-.61,1.53-1.53,1.53-.79,0-1.53-.61-1.53-1.53v-29.03h-8.56c-.92,0-1.53-.61-1.53-1.53,0-.79.61-1.53,1.53-1.53h8.56v-3.55c0-.92.73-1.53,1.53-1.53.92,0,1.53.61,1.53,1.53v3.55h17.42v-3.55c0-.92.61-1.53,1.53-1.53.73,0,1.53.61,1.53,1.53v3.55h8.56c.92,0,1.53.73,1.53,1.53,0,.92-.61,1.53-1.53,1.53Z"
                class="logo-vector__right-path"></path>
            </g>
          </g>
        </svg>
        <div class="logo-name">SUZUKI SOSAKU</div>
      </a>
    </div>
  </div>
</header>

<nav class="nav js-global-nav">
  <ul class="nav-items">
    <li class="nav-item">
      <a class="nav-item__link" href="/#concept">CONCEPT</a>
    </li>
    <li class="nav-item">
      <a class="nav-item__link" href="/#service">SERVICE</a>
    </li>
    <li class="nav-item">
      <a class="nav-item__link" href="/#works">WORKS</a>
    </li>
    <li class="nav-item">
      <a class="nav-item__link" href="/#profile">PROFILE</a>
    </li>
    <li class="nav-item">
      <a class="nav-item__link" href="/#contact">CONTACT</a>
    </li>
  </ul>
</nav>

<MobileMenu />

<style lang="scss">
  @import '../styles/breakpoint.scss';

  .global-header {
    &:before {
      // content: '';
      display: block;
      position: absolute;
      top: 110px;
      width: 100%;
      height: 1px;
      z-index: -1;
      background-image: var(--gradient-secondary);
    }
  }

  .header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 90px;
    @media (width > $breakpoint-sm) {
      height: 110px;
    }
  }
  .logo-name {
    font-weight: var(--fw-bold);
    font-size: var(--fs-xs);
    color: var(--text-gray);
    @media (width > $breakpoint-sm) {
      font-size: var(--fs-sm);
    }
  }
  .logo {
    flex: 0 1 auto;
    display: inline-flex;
    align-items: center;
    flex-direction: column;
    gap: 2px;
    &:hover {
      .logo__image {
        opacity: 0.8;
      }
      .logo-vector__left-path {
        transform: translate(6px, -6px);
      }
    }
  }
  .logo__image {
    width: 60px;
    transition: opacity 0.2s 0.2s ease;
    @media (width > $breakpoint-sm) {
      width: 80px;
    }
  }
  :where(.logo-vector__left-path) {
    transition: transform 0.2s ease-in-out;
    fill: var(--text-gray);
  }
  :where(.logo-vector__right-path) {
    fill: var(--text-gray);
  }

  .nav {
    position: fixed;
    width: 100%;
    top: 0;
    z-index: 120;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(#fff, 0.8);
    backdrop-filter: blur(6px);
    transform: translateY(-110px);
    transition: transform 0.2s 0.2s ease;
    @media (width > $breakpoint-md) {
      &.is-visible {
        transform: translateY(0px);
      }
    }
  }
  .nav-items {
    display: flex;
    align-items: center;
    gap: 24px;
  }
  .nav-item {
    font-size: var(--fs-sm);
    font-weight: var(--fw-bold);
  }
  .nav-item__link {
    display: block;
    padding: 16px 16px;
    &:hover {
      color: transparent;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      background-color: #ff4e16;
      background-image: var(--gradient-primary);
    }
  }
</style>

<script>
  let navVisible = false;

  function toggleNav(visible: boolean) {
    const navEl = document.querySelector('.js-global-nav');
    if (!navEl) return;

    if (visible) {
      navEl.classList.add('is-visible');
    } else {
      navEl.classList.remove('is-visible');
    }
  }

  window.addEventListener('scroll', (evt) => {
    if (window.scrollY > 110 && navVisible) {
      return;
    }
    if (window.scrollY <= 110 && !navVisible) {
      return;
    }

    if (window.scrollY > 110 && !navVisible) {
      navVisible = true;
    } else {
      navVisible = false;
    }
    toggleNav(navVisible);
  });
</script>
